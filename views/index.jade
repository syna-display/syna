extend layout
block imports
    script(src="/socket.io/socket.io.js")
    script(src="/js/sync.js")
    link(rel="stylesheet", href="/css/manager.css")
    script(src="//cdnjs.cloudflare.com/ajax/libs/Sortable/1.4.2/Sortable.min.js")
    link(rel="stylesheet", href="https://fonts.googleapis.com/icon?family=Material+Icons")
    script(src="/js/jquery.min.js")
block content
    .container.content.heightinherit
        .row.heightinherit
            .col-md-12.heightinherit
                .block-commands
                    #commands.list-group
                        each val in commandlist
                            .list-group-item(id= val.id)
                                .row
                                    div.bang.col-md-1
                                        if val.bangico != ''
                                            i.material-icons= val.bangico
                                        else
                                            img(src=val.bangicourl alt=val.banglong)
                                    div.command.col-md-10
                                        =val.command
                                    div.button.col-md-1
                                        button.btn.btn-default(type='button')
                                            i.material-icons cast
                    script.
                        var el = document.getElementById('commands');
                        Sortable.create(el, {
                            onUpdate: function (evt) {
                                console.log(evt);
                            }
                        });// https://github.com/RubaXa/Sortable
                hr
                .block-command
                    form#command(action="/api/v1/sendText" method="POST")
                        .form-group
                            input.form-control(name="input", type='text', placeholder='Demandez Ã  Syna')
                            script.
                                $("#command").submit(function(e) {
                                    var postData = $(this).serialize();
                                    var formURL = $(this).attr("action");
                                    var method = $(this).attr("method");
                                    $.ajax({
                                        url: formURL,
                                        type: method,
                                        data: postData,
                                        success: function (data, textStatus, jqXHR) {
                                            console.log(data);
                                        },
                                        error: function (jqXHR, textStatus, errorThrown) {
                                            console.log(jqXHR);
                                        }
                                    });
                                    e.preventDefault();
                                });

